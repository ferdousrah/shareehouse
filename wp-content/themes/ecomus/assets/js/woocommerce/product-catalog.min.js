(function(m){"use strict";var u=u||{};u.init=function(){u.$body=m(document.body),u.$window=m(window),u.$header=m("#site-header");this.shopHeaderMore();this.topCategories();this.scrollFilterSidebar();this.productsFilterActivated();this.changeCatalogElementsFiltered();this.catalogOrderBy();this.loadMoreProducts()};u.shopHeaderMore=function(){var e=m(document).find(".shop-header__content");e.each(function(){if(jQuery(this)[0].scrollHeight>jQuery(this)[0].clientHeight){jQuery(this).siblings(".shop-header__more").removeClass("hidden")}});m(document.body).on("click",".shop-header__more",function(e){e.preventDefault();var t=m(this).data("settings"),o=t.more,i=t.less;if(m(this).hasClass("less")){m(this).removeClass("less");m(this).text(o);m(this).siblings(".shop-header__content").removeAttr("style")}else{m(this).addClass("less");m(this).text(i);m(this).siblings(".shop-header__content").css("-webkit-line-clamp","inherit")}})};u.topCategories=function(){if(typeof Swiper==="undefined"){return}var e=m(".catalog-top-categories");if(!e.length){return}var t=e.data("settings");var o={observer:true,observeParents:true,loop:false,autoplay:false,watchOverflow:true,spaceBetween:t&&t.column_space&&t.column_space.desktop?parseInt(t.column_space.desktop):30,navigation:{nextEl:e.find(".swiper-button-next").get(0),prevEl:e.find(".swiper-button-prev").get(0)},pagination:{el:e.find(".swiper-pagination").get(0),type:"bullets",clickable:true},breakpoints:{0:{slidesPerView:t&&t.columns&&t.columns.mobile?parseInt(t.columns.mobile):2,slidesPerGroup:t&&t.columns&&t.columns.mobile?parseInt(t.columns.mobile):2,spaceBetween:t&&t.column_space&&t.column_space.mobile?parseInt(t.column_space.mobile):15},700:{slidesPerView:t&&t.columns&&t.columns.tablet?parseInt(t.columns.tablet):3,slidesPerGroup:t&&t.columns&&t.columns.tablet?parseInt(t.columns.tablet):3,spaceBetween:t&&t.column_space&&t.column_space.tablet?parseInt(t.column_space.tablet):30},1200:{slidesPerView:t&&t.columns&&t.columns.desktop?parseInt(t.columns.desktop):5,slidesPerGroup:1,spaceBetween:t&&t.column_space&&t.column_space.desktop?parseInt(t.column_space.desktop):30}}};new Swiper(e.get(0),o)};u.scrollFilterSidebar=function(){u.$body.on("ecomus_products_filter_before_send_request",function(){var e=0;if(!m("#ecomus-shop-content").length){return}if(m(".catalog-toolbar").length){e+=m(".catalog-toolbar").outerHeight()}m("html,body").stop().animate({scrollTop:m("#ecomus-shop-content").offset().top-e},"300",function(){})})};u.productsFilterActivated=function(){var s=m(".catalog-toolbar__filters-actived"),l=m(".catalog-toolbar__active-filters"),i=m(".filter-sidebar-panel"),e=i.find(".products-filter__activated-items"),r='<a href="#" class="remove-filtered remove-filtered-all">'+s.data("clear-text")+"</a>";if(e.html()&&e.html().trim()){s.html("");s.removeClass("active");s.prepend(e.html()+r);s.addClass("active");l.addClass("actived")}u.$body.on("ecomus_products_filter_request_success",function(e,t,o,i){var n=m(t).filter(".filter-sidebar-panel").find(".products-filter__activated-items"),a=m(t).find(".filter-sidebar-panel .products-filter__activated-items");if(n.children().length>0){if(n.html()&&n.html().trim()){s.removeClass("hidden");s.html("");s.removeClass("active");s.prepend(n.html()+r);s.addClass("active");l.addClass("actived")}}else if(a.children().length>0){if(a.html()&&a.html().trim()){s.removeClass("hidden");s.html("");s.removeClass("active");s.prepend(a.html()+r);s.addClass("active");l.addClass("actived")}}else{if(s.hasClass("active")){s.html("");s.removeClass("active");l.removeClass("actived")}}});s.on("click",".remove-filtered:not(.remove-filtered-all)",function(e){var t=m(this).data("value"),o=i.find(".products-filter__activated-items");if(t!=="undefined"){m(this).remove();i.find(".remove-filtered[data-value='"+t+"']").trigger("click")}if(!o.html()||!o.html().trim()){s.html("");s.removeClass("active");l.removeClass("actived")}return false});s.on("click",".remove-filtered-all",function(e){e.preventDefault();i.find(".products-filter__button .reset-button").trigger("click")});m(document.body).on("ecomus_products_filter_reseted",function(){s.html("");s.removeClass("active");l.removeClass("actived");m("#site-content .woocommerce-notices-wrapper").fadeOut()})};u.changeCatalogElementsFiltered=function(){u.$body.on("ecomus_products_filter_before_send_request",function(e,t){m(".filter-sidebar-panel").find(".panel__button-close").trigger("click")});u.$body.on("ecomus_products_filter_request_success",function(e,t){var o=m(t),i=u.$body.find("#page-header"),n=u.$body.find(".catalog-top-categories"),a=u.$body.find(".catalog-toolbar__result-count"),s=u.$body.find(".ecomus-badges-sale__countdown .ecomus-countdown"),l=u.$body.find(".woocommerce-pagination"),r=u.$body.find(".ecomus-toolbar-view"),c=u.$body.find(".catalog-toolbar__active-filters"),d=u.$body.find(".woocommerce-info");if(o.find("#page-header").length){i.replaceWith(o.find("#page-header"))}if(o.find(".catalog-top-categories").text().trim().length>0){n.show();n.replaceWith(o.find(".catalog-top-categories"));u.topCategories()}else{n.hide()}if(o.find(".catalog-toolbar__result-count").length){a.replaceWith(o.find(".catalog-toolbar__result-count"))}else{a.find(".count").replaceWith('<span class="count">0</span>')}if(o.find(".ecomus-badges-sale__countdown").length){s.ecomus_countdown()}if(o.find(".woocommerce-pagination").length){l.replaceWith(o.find(".woocommerce-pagination"))}else{l.addClass("hidden")}if(o.find(".ecomus-toolbar-view").length&&r.closest(".elementor-widget-ecomus-archive-product-view").length<1){r.replaceWith(o.find(".ecomus-toolbar-view"))}if(o.find(".em-button-no-products-found").length){d.append(o.find(".em-button-no-products-found"))}c.removeClass("hidden")})};u.catalogOrderBy=function(){var o=m("#mobile-orderby-popover"),i=m(".catalog-toolbar__item .woocommerce-ordering");if(m.fn.select2){i.find("select").select2({width:"auto",minimumResultsForSearch:-1,dropdownCssClass:"products-ordering",dropdownParent:i})}o.find(".mobile-orderby-list").on("click","a",function(e){e.preventDefault();var t=m(this).data("id");o.find(".mobile-orderby-list .selected").removeClass("selected");m(this).addClass("selected");i.find("option:selected").attr("selected",false);i.find("option[value="+t+"]").attr("selected","selected");i.trigger("submit")});var e=i.find("option:selected").val();o.find(".mobile-orderby-list a[data-id="+e+"]").addClass("selected")};u.loadMoreProducts=function(){if(m(".woocommerce-pagination").hasClass("woocommerce-pagination--infinite")){var e=false,t;m(window).on("scroll",function(){if(e){return}e=true;clearTimeout(t);o();setTimeout(function(){e=false},100);t=setTimeout(function(){e=false;o()},200)})}function o(){var t=m(".woocommerce-pagination.woocommerce-pagination--ajax"),o=m(".woocommerce-pagination-button",t);if(u.isVisible(t)&&o.length&&!o.hasClass("loading")){o.addClass("loading");n(o,function(e){o=t.find(".woocommerce-pagination-button")})}}if(m(".woocommerce-pagination").hasClass("woocommerce-pagination--loadmore")){u.$body.on("click",".woocommerce-pagination.woocommerce-pagination--loadmore .woocommerce-pagination-button",function(e){e.preventDefault();i()})}function i(){var t=m(".woocommerce-pagination.woocommerce-pagination--ajax"),o=m(".woocommerce-pagination-button",t);if(u.isVisible(t)&&o.length&&!o.hasClass("loading")){o.addClass("loading");n(o,function(e){o=t.find(".woocommerce-pagination-button")})}}function n(s,l){var r=s.closest(".woocommerce-pagination"),c=s.attr("href");m.get(c,function(e){var t=m(".ecomus-shop-content",e),o=m("ul.products",t),i=o.children(),n=m(".woocommerce-pagination.woocommerce-pagination--ajax",t);i.addClass("em-fadeinup em-animated");let a=.5;i.each(function(e,t){jQuery(t).css("--em-fadeinup-delay",a+"s");a=a+.1});i.appendTo(r.parent().find("ul.products"));if(n.length){s.replaceWith(m("a",n))}else{r.fadeOut(function(){r.remove()})}if("function"===typeof l){l(e)}u.$body.trigger("ecomus_products_loaded",[i,true]);if(i.hasClass("em-animated")){setTimeout(function(){i.removeClass("em-animated")},10)}s.removeClass("loading");if(ecomusData.shop_nav_ajax_url_change){window.history.pushState(null,"",c)}})}};u.isVisible=function(e){if(e instanceof jQuery){e=e[0]}if(!e){return false}var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)};m(function(){u.init()})})(jQuery);